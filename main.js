(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},o=[],s=0;s<t.length;s++){var d=t[s],l=r.base?d[0]+r.base:d[0],h=i[l]||0,c="".concat(l," ").concat(h);i[l]=h+1;var p=n(c),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var m=a(u,r);r.byIndex=s,e.splice(s,0,{identifier:c,updater:m,references:1})}o.push(c)}return o}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var i=r(t=t||[],a=a||{});return function(t){t=t||[];for(var o=0;o<i.length;o++){var s=n(i[o]);e[s].references--}for(var d=r(t,a),l=0;l<i.length;l++){var h=n(i[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}i=d}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},208:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(601),a=n.n(r),i=n(314),o=n.n(i)()(a());o.push([t.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\nh1 {\n  display: flex;\n  justify-content: center;\n  padding: 12px 0;\n}\n\n.board-container {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  padding-top: 24px;\n}\n\n.board-container > *:nth-child(3) {\n  margin-left: 80px;\n}\n\n.board1,\n.board2 {\n  height: 320px;\n  width: 320px;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n}\n\n.board1 > *,\n.board2 > * {\n  position: relative;\n  border: 1px solid black;\n}\n\n.board-container p {\n  display: flex;\n  justify-content: center;\n  padding-top: 12px;\n}\n\n.output-msg {\n  display: flex;\n  justify-content: center;\n  width: fit-content;\n  margin: 32px auto 0;\n  padding: 3px;\n  background-color: #e5e5e5;\n  border-radius: 4px;\n}\n\n.output-msg:empty {\n  padding: 0;\n}\n\n.ship {\n  border: 1px solid rgb(0, 79, 158);\n  background-color: rgb(106, 160, 255);\n}\n\n.ship-cell {\n  border: 1px solid rgb(0, 79, 158);\n  background-color: rgb(106, 160, 255);\n  height: 32px;\n  width: 32px;\n}\n\n.ship-container {\n  width: 176px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 4px;\n  margin-left: 16px;\n}\n\n.whole-ship {\n  display: flex;\n}\n\n.board1-buttons {\n  height: 32px;\n}\n\n.miss {\n  position: relative;\n  border: 1px solid rgb(80, 80, 80);\n  background-color: rgb(200, 200, 200);\n}\n\n.miss::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 5px;\n  height: 5px;\n  background-color: rgb(80, 80, 80);\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.hit {\n  position: relative;\n  border: 1px solid rgb(200, 0, 0);\n  background-color: rgb(255, 200, 200);\n}\n\n.hit::before,\n.hit::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 43px;\n  height: 2px;\n  background-color: rgb(200, 0, 0);\n  transform-origin: center;\n}\n\n.hit::before {\n  transform: translate(-50%, -50%) rotate(45deg);\n}\n\n.hit::after {\n  transform: translate(-50%, -50%) rotate(-45deg);\n}\n\n.blur {\n  opacity: 0.5;\n}\n\ndialog {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: none;\n  border-radius: 10px;\n  padding: 24px;\n  min-width: 280px;\n  max-width: 90%;\n  background: #f8f9fa;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);\n}\n\n.dialog-content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\ndialog h2 {\n  margin: 0;\n  text-align: center;\n  font-size: 1.4rem;\n  color: #333;\n}\n\ndialog form {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\ndialog label {\n  font-size: 0.95rem;\n  color: #555;\n}\n\ndialog input[type='text'] {\n  padding: 8px 10px;\n  border-radius: 6px;\n  border: 1px solid #ccc;\n  font-size: 1rem;\n  width: 100%;\n}\n\ndialog button {\n  padding: 10px 16px;\n  border: none;\n  border-radius: 6px;\n  background-color: black;\n  color: white;\n  font-size: 1rem;\n  cursor: pointer;\n}\n\nbutton:hover {\n  filter: brightness(90%);\n}\n\n.board-btns {\n  height: 28px;\n  padding-bottom: 4px;\n}\n\n.board-btns button {\n  padding: 4px 5px;\n  border: none;\n  border-radius: 3px;\n  background-color: black;\n  color: white;\n  cursor: pointer;\n  margin-right: 3px;\n}\n\n.placement-valid {\n  background: rgba(0, 200, 0, 0.35);\n}\n.placement-invalid {\n  background: rgba(200, 0, 0, 0.35);\n}\n\n.whole-ship {\n  cursor: grab;\n}\n.whole-ship:active {\n  cursor: grabbing;\n}\n\n#endgame-dialog {\n  padding: 24px 0;\n}\n\n#endgame-dialog button {\n  display: flex;\n  margin: 0 auto;\n  font-size: 20px;\n}\n\n#endgame-dialog h2 {\n  padding-bottom: 12px;\n}\n",""]);const s=o},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,r,a,i){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(o[d]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);r&&o[h[0]]||(void 0!==i&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=i),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),a&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=a):h[4]="".concat(a)),e.push(h))}},e}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),a=n.n(r),i=n(825),o=n.n(i),s=n(659),d=n.n(s),l=n(56),h=n.n(l),c=n(540),p=n.n(c),u=n(113),m=n.n(u),b=n(208),g={};g.styleTagTransform=m(),g.setAttributes=h(),g.insert=d().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=p(),a()(b.A,g),b.A&&b.A.locals&&b.A.locals;class y{constructor(t){this._length=t,this._numOfHits=0}get sunk(){return this._sunk}hit(){this._numOfHits++}isSunk(){return this._numOfHits===this._length}}class f{constructor(){this._board=Array(10).fill().map(()=>Array(10).fill("empty")),this._ships={carrier:[5,new y(5)],battleship:[4,new y(4)],destroyer:[3,new y(3)],submarine:[3,new y(3)],patrolBoat:[2,new y(2)]}}get board(){return this._board}get ships(){return this._ships}placeHorizontally(t,e,n){const r=this._ships[t][0];if(e+r>10)throw new Error("Ship is out of bounds.");for(let t=0;t<r;t++)for(let r=-1;r<=1;r++)for(let a=-1;a<=1;a++){const i=e+t+r,o=n+a;if(i>=0&&i<10&&o>=0&&o<10&&"empty"!==this._board[i][o])throw new Error("Cell or neighbor occupied")}for(let a=0;a<r;a++)this._board[e+a][n]=t}placeVertically(t,e,n){const r=this._ships[t][0];if(n+r>10)throw new Error("Ship is out of bounds.");for(let t=0;t<r;t++)for(let r=-1;r<=1;r++)for(let a=-1;a<=1;a++){const i=e+r,o=n+t+a;if(i>=0&&i<10&&o>=0&&o<10&&"empty"!==this._board[i][o])throw new Error("Cell or neighbor occupied")}for(let a=0;a<r;a++)this._board[e][n+a]=t}placeAllRandomly(){for(const t of Object.keys(this._ships)){const e=500;let n,r,a=0;for(;a<e;){n=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());try{Math.random()>.5?this.placeHorizontally(t,n,r):this.placeVertically(t,n,r);break}catch{a++}}}}receiveAttack(t,e){if(t>9||e>9)throw new Error("Attack is out of bounds.");if("empty"===this._board[t][e])this._board[t][e]="miss";else if("hit"!==this._board[t][e]&&"miss"!==this._board[t][e]){this._ships[this._board[t][e]][1].hit();const n=this._ships[this.board[t][e]][1];if(this._board[t][e]="hit",n.isSunk()){let n,r,a=t,i=e,o=!1;const s=[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]];for(;!o;){o=!0;for(const[d,l]of s){const s=t+d,h=e+l;s<0||s>9||h<0||h>9||("empty"===this.board[s][h]&&(this.board[s][h]="miss"),"hit"!==this.board[s][h]||s===a&&h===i||(o=!1,n=s,r=h))}a=t,i=e,t=n,e=r}}}}isAllSunk(){for(const t of Object.values(this._ships))if(!t[1].isSunk())return!1;return!0}}class _{constructor(t){this._name=t,this._gameboard=new f}get name(){return this._name}get gameboard(){return this._gameboard}attack(t,e,n){t.gameboard.receiveAttack(e,n)}}class x extends _{constructor(){super("Computer"),this._mode="hunt",this._shipAttacked=null,this._hitX=null,this._hitY=null,this._direction=null,this._huntLists={};for(let t=2;t<=5;t++){const e=[];for(let n=0;n<10;n++)for(let r=0;r<10;r++)(n+r)%t===0&&e.push({x:n,y:r});this._huntLists[t]=e.sort(()=>Math.random()-.5),this._huntLists[t].index=0}}attack(t){if("hunt"===this._mode){let e;e=t.gameboard.ships.carrier[1].isSunk()?t.gameboard.ships.battleship[1].isSunk()?t.gameboard.ships.destroyer[1].isSunk()&&t.gameboard.ships.submarine[1].isSunk()?2:3:4:5;const n=this._huntLists[e];let r,a;for(;;){n.index>=n.length&&(n.index=0);const e=n[n.index++];if(r=e.x,a=e.y,"hit"!==t.gameboard.board[r][a]&&"miss"!==t.gameboard.board[r][a])break}"empty"!==t.gameboard.board[r][a]&&(this._mode="target",this._shipAttacked=t.gameboard.ships[t.gameboard.board[r][a]][1],this._hitX=r,this._hitY=a,this._startX=this._hitX,this._startY=this._hitY,this._direction=null),t.gameboard.receiveAttack(r,a)}else{if(null!==this._direction){const e=this._hitX+this._direction.x,n=this._hitY+this._direction.y;if(e>=0&&e<=9&&n>=0&&n<=9&&"hit"!==t.gameboard.board[e][n]&&"miss"!==t.gameboard.board[e][n])return t.gameboard.receiveAttack(e,n),this._shipAttacked.isSunk()&&(this._mode="hunt"),void("hit"===t.gameboard.board[e][n]?(this._hitX=e,this._hitY=n):(this._hitX=this._startX,this._hitY=this._startY,this._direction=null));const r=this._startX-this._direction.x,a=this._startY-this._direction.y;return r>=0&&r<=9&&a>=0&&a<=9&&"hit"!==t.gameboard.board[r][a]&&"miss"!==t.gameboard.board[r][a]?(t.gameboard.receiveAttack(r,a),this._shipAttacked.isSunk()&&(this._mode="hunt"),void("hit"===t.gameboard.board[r][a]?(this._direction={x:-this._direction.x,y:-this._direction.y},this._hitX=r,this._hitY=a):(this._hitX=this._startX,this._hitY=this._startY,this._direction=null))):(this._hitX=this._startX,this._hitY=this._startY,void(this._direction=null))}{const e=[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:0,y:1}];for(const n of e){const e=this._startX+n.x,r=this._startY+n.y;if(e<0||e>9||r<0||r>9)continue;const a=t.gameboard.board[e][r];if("hit"!==a&&"miss"!==a)return t.gameboard.receiveAttack(e,r),this._shipAttacked.isSunk()&&(this._mode="hunt"),void("hit"===t.gameboard.board[e][r]&&(this._direction=n,this._hitX=e,this._hitY=r))}}}}}class v{constructor(t,e,n,r=null){this._board1=t,this._board2=e,this._player1=new _(n),null===r?(this._player2=new x,this._isComputer=!0):(this._player2=new _(r),this._isComputer=!1),this._player1Turn=!0,this._placementHandlers={},this._dragState=null}createBoards(){for(let t=0;t<100;t++){const e=document.createElement("div"),n=document.createElement("div");e.dataset.index=t,n.dataset.index=t,e.classList.add("board-cell"),n.classList.add("board-cell"),this._board1.appendChild(e),this._board2.appendChild(n)}document.querySelector(".output-msg").textContent=`${this._player1._name}'s turn`,document.querySelector(".board1-caption").textContent=`${this._player1._name}'s board`,document.querySelector(".board2-caption").textContent=`${this._player2._name}'s board`}initBoards(){const t=this._board1.children,e=this._board2.children;for(let t=0;t<10;t++)for(let n=0;n<10;n++)e[t+10*n].addEventListener("click",()=>{this._player1Turn&&(this.playTurn(t,n),this._isComputer&&setTimeout(()=>{this.playTurn()},300))});if(!this._isComputer)for(let e=0;e<10;e++)for(let n=0;n<10;n++)t[e+10*n].addEventListener("click",()=>{this._player1Turn||this.playTurn(e,n)});this.reRenderBoard(this._player1,this._board1,!1),this.reRenderBoard(this._player2,this._board2,!0)}reRenderBoard(t,e,n){const r=e.children;for(let e=0;e<10;e++)for(let a=0;a<10;a++){const i=e+10*a;switch(t.gameboard.board[e][a]){case"miss":r[i].className="miss";break;case"carrier":case"battleship":case"submarine":case"destroyer":case"patrolBoat":r[i].className=n?"":"ship";break;case"hit":r[i].className="hit";break;default:r[i].className=""}}}playTurn(t=null,e=null){const n=document.querySelector(".output-msg");if(this._player1Turn){if(!this.canPlayTurn(t,e,this._player1,this._player2))return;this._player1.attack(this._player2,t,e),this._player1Turn=!1,this.reRenderBoard(this._player1,this._board1,!this._isComputer),this.reRenderBoard(this._player2,this._board2,!0),setTimeout(()=>{if(this._player2.gameboard.isAllSunk())return n.textContent=`${this._player1._name} has won!`,void this.showEndGameDialog();this._isComputer?(this._board2.classList.add("blur"),n.textContent=`${this._player2._name}'s turn`,setTimeout(()=>this.playTurn(),500)):(this.reRenderBoard(this._player1,this._board1,!0),this.reRenderBoard(this._player2,this._board2,!0),n.textContent="Switch to other player",setTimeout(()=>{this.reRenderBoard(this._player1,this._board1,!0),this.reRenderBoard(this._player2,this._board2,!1),n.textContent=`${this._player2._name}'s turn`},2e3))},0)}else{if(this._player2.gameboard.isAllSunk())return;if(this._isComputer)this._board2.classList.remove("blur"),this._player2.attack(this._player1);else{if(!this.canPlayTurn(t,e,this._player2,this._player1))return;this._player2.attack(this._player1,t,e)}this._player1Turn=!0,this.reRenderBoard(this._player1,this._board1,!this._isComputer),this.reRenderBoard(this._player2,this._board2,!0),setTimeout(()=>{if(this._player1.gameboard.isAllSunk())return n.textContent=`${this._player2._name} has won!`,void this.showEndGameDialog();this._isComputer?n.textContent=`${this._player1._name}'s turn`:(this.reRenderBoard(this._player1,this._board1,!0),this.reRenderBoard(this._player2,this._board2,!0),n.textContent="Switch to other player",setTimeout(()=>{this.reRenderBoard(this._player1,this._board1,!1),this.reRenderBoard(this._player2,this._board2,!0),n.textContent=`${this._player1._name}'s turn`},2e3))},0)}}canPlayTurn(t,e,n,r){if(null===t)return!1;if(n.gameboard.isAllSunk())return!1;const a=r.gameboard.board[t][e];return"miss"!==a&&"hit"!==a}showShips(t){const e=document.querySelectorAll(".ship-container"),n=(t,e)=>{const n=document.createElement("div");n.classList.add("whole-ship"),n.dataset.shipName=e,n.dataset.length=String(t),n.draggable=!0;for(let e=0;e<t;e++){const t=document.createElement("div");t.classList.add("ship-cell"),n.append(t)}return n.addEventListener("pointerdown",t=>{const e=t.target.closest(".ship-cell");if(!e)return void(n.dataset.grabIndex="0");const r=Array.prototype.indexOf.call(n.children,e);n.dataset.grabIndex=String(r)}),n},r=n(5,"carrier"),a=n(4,"battleship"),i=n(3,"submarine"),o=n(3,"destroyer"),s=n(2,"patrolBoat");e[t].append(r,a,i,o,s)}createBoardButtons(t){const e=document.querySelectorAll(".board-btns"),n=document.createElement("button");n.textContent="Randomise";const r=document.createElement("button");r.textContent="Change axis",n.addEventListener("click",()=>{const e=0===t?this._player1:this._player2;e.gameboard.placeAllRandomly();const n=0===t?this._board1:this._board2;this.reRenderBoard(e,n,!1);const r=document.querySelectorAll(".ship-container")[t];for(;r.firstChild;)r.removeChild(r.firstChild);this.finishPlacementForBoard(t)}),r.addEventListener("click",()=>{const e=document.querySelectorAll(".ship-container")[t],n=getComputedStyle(e),r=n.flexDirection,a=n.justifyContent;e.style.flexDirection="column"===r?"row":"column",e.style.justifyContent="flex-start"===a?"center":"flex-start",[...e.children].forEach(t=>{const e=getComputedStyle(t).flexDirection;t.style.flexDirection="column"===e?"row":"column"})}),e[t].append(n,r)}startPlacementPhase(t){const e=document.querySelector(".output-msg"),n=0===t?this._player1:this._player2;e.textContent=`Place your ships, ${n._name}`,this.enableShipPlacement(t)}enableShipPlacement(t){const e={};this._placementHandlers[t]=e;const n=document.querySelectorAll(".ship-container")[t],r=0===t?this._board1:this._board2,a=r.children;e.onDragStart=t=>{const e=t.currentTarget,n=e.dataset.shipName,r=parseInt(e.dataset.length,10),a=parseInt(e.dataset.grabIndex||"0",10);this._dragState={shipName:n,length:r,grabbedIndex:a,shipEl:e},e.style.opacity="0.6"},e.onDragEnd=()=>{this._dragState&&this._dragState.shipEl&&(this._dragState.shipEl.style.opacity=""),this._dragState=null,this.clearPlacementHighlights(r)},Array.from(n.children).forEach(t=>{t.setAttribute("draggable","true"),t.addEventListener("dragstart",e.onDragStart),t.addEventListener("dragend",e.onDragEnd)}),e.onDragOver=e=>{if(e.preventDefault(),!this._dragState)return;const n=e.currentTarget,i=parseInt(n.dataset.index,10),o=i%10,s=Math.floor(i/10),{length:d,grabbedIndex:l,shipEl:h}=this._dragState,c="row"===getComputedStyle(h).flexDirection,p=c?o-l:o,u=c?s:s-l,m=[];let b=!0;const g=(0===t?this._player1:this._player2).gameboard.board;for(let t=0;t<d;t++){const e=c?p+t:p,n=c?u:u+t;if(e<0||e>9||n<0||n>9)b=!1,m.push({x:e,y:n});else{for(let t=-1;t<=1;t++)for(let r=-1;r<=1;r++){const a=e+t,i=n+r;a>=0&&a<10&&i>=0&&i<10&&"empty"!==g[a][i]&&(b=!1)}m.push({x:e,y:n})}}this.clearPlacementHighlights(r),m.forEach(t=>{if(t.x>=0&&t.x<=9&&t.y>=0&&t.y<=9){const e=t.x+10*t.y;a[e].classList.add(b?"placement-valid":"placement-invalid")}})},e.onDrop=e=>{if(e.preventDefault(),!this._dragState)return;const n=e.currentTarget,a=parseInt(n.dataset.index,10),i=a%10,o=Math.floor(a/10),{shipName:s,grabbedIndex:d,shipEl:l}=this._dragState,h="row"===getComputedStyle(l).flexDirection,c=h?i-d:i,p=h?o:o-d,u=0===t?this._player1:this._player2;try{h?u.gameboard.placeHorizontally(s,c,p):u.gameboard.placeVertically(s,c,p)}catch{return this.clearPlacementHighlights(r),n.classList.add("placement-invalid"),void setTimeout(()=>this.clearPlacementHighlights(r),350)}l&&l.parentElement&&l.parentElement.removeChild(l);const m=0===t?this._board1:this._board2;this.reRenderBoard(u,m,!1),this.clearPlacementHighlights(r),this._dragState=null;const b=document.querySelectorAll(".ship-container")[t];b&&0!==b.children.length||this.finishPlacementForBoard(t)},e.onDragLeave=()=>{this.clearPlacementHighlights(r)},Array.from(a).forEach(t=>{t.addEventListener("dragover",e.onDragOver),t.addEventListener("drop",e.onDrop),t.addEventListener("dragleave",e.onDragLeave)}),e.shipContainer=n,e.boardEl=r,e.cells=a}clearPlacementHighlights(t){Array.from(t.children).forEach(t=>{t.classList.remove("placement-valid","placement-invalid")})}disableShipPlacement(t){const e=this._placementHandlers[t];if(!e)return;const n=e.shipContainer;n&&Array.from(n.children).forEach(t=>{t.removeEventListener("dragstart",e.onDragStart),t.removeEventListener("dragend",e.onDragEnd)}),e.cells&&Array.from(e.cells).forEach(t=>{t.removeEventListener("dragover",e.onDragOver),t.removeEventListener("drop",e.onDrop),t.removeEventListener("dragleave",e.onDragLeave)}),delete this._placementHandlers[t]}finishPlacementForBoard(t){this.disableShipPlacement(t);const e=document.querySelectorAll(".board-btns")[t];for(;e.firstChild;)e.removeChild(e.firstChild);const n=document.querySelector(".output-msg");this._isComputer?0===t&&(this._player2.gameboard.placeAllRandomly(),this.initBoards(),this.reRenderBoard(this._player2,this._board2,!0),n.textContent=`${this._player1._name}'s turn`):0===t?(n.textContent="Switch to other player",this.reRenderBoard(this._player1,this._board1,!0),this.reRenderBoard(this._player2,this._board2,!0),setTimeout(()=>{this.showShips(1),this.createBoardButtons(1),this.startPlacementPhase(1)},1e3)):(n.textContent="Switch to other player",this.reRenderBoard(this._player2,this._board2,!0),setTimeout(()=>{this.initBoards(),n.textContent=`${this._player1._name}'s turn`,this.reRenderBoard(this._player1,this._board1,!1)},1e3))}showEndGameDialog(){const t=document.getElementById("endgame-dialog");t.showModal(),document.getElementById("play-again-btn").onclick=()=>{t.close(),window.location.reload()}}}window.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("choose-mode");t.showModal(),document.getElementById("computer-btn").addEventListener("click",()=>{t.close(),t.style.display="none";const e=document.getElementById("input-player1-only");e.showModal(),document.getElementById("input-player1-only-form").addEventListener("submit",t=>{t.preventDefault();const n=document.querySelector("#name").value,r=new v(document.querySelector(".board1"),document.querySelector(".board2"),n);e.close(),r.createBoards(),r.showShips(0),r.createBoardButtons(0),r.startPlacementPhase(0),document.querySelector(".board1").style.border="1px solid black",document.querySelector(".board2").style.border="1px solid black"})}),document.getElementById("2-player-btn").addEventListener("click",()=>{t.close(),t.style.display="none";const e=document.getElementById("input-players");e.showModal(),document.getElementById("input-players-form").addEventListener("submit",t=>{t.preventDefault();const n=document.querySelector("#name1").value,r=document.querySelector("#name2").value,a=new v(document.querySelector(".board1"),document.querySelector(".board2"),n,r);e.close(),a.createBoards(),a.showShips(0),a.createBoardButtons(0),a.startPlacementPhase(0),document.querySelector(".board1").style.border="1px solid black",document.querySelector(".board2").style.border="1px solid black"})})})})();